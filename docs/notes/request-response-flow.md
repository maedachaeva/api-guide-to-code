# 웹 브라우저의 동작 원리

### 📝 목차
1. [주소창에 URL을 입력하면 일어나는 일](#주소창에-url을-입력하면-일어나는-일)
2. [브라우저의 네트워크 통신 과정](#브라우저의-네트워크-통신-과정)

---
<br>

## 주소창에 URL을 입력하면 일어나는 일
사용자가 주소창에 `www.google.com`을 입력하면 브라우저는 해당 리소스를 가져오기 위해 서버와 통신을 시작합니다.
<br>
이 과정에서 HTTP 프로토콜이 사용되며 HTTP는 OSI 7계층 중 애플리케이션 계층에서 동작하는 프로토콜입니다.

<br>

브라우저에서 서버까지 데이터가 전달되는 흐름은 다음과 같습니다.
> `URL 분석` → `DNS 조회` → `TCP 연결` → `HTTP 요청/응답` → `렌더링` → `연결 종료`

<br><br>

## 브라우저의 네트워크 통신 과정
### 1. URL 입력 및 분석
> 브라우저는 사용자가 입력한 주소를 파싱하여 어디로(Domain), 어떤 방식으로(Protocol), 어느 문(Port)으로 들어갈지 결정합니다.
- 프로토콜: `https`
- 도메인: `www.google.com`
- 포트: `443`(HTTPS 기본 포트)

<br>

### 2. DNS 조회(Domain Name System)
> 브라우저는 도메인 이름을 실제 서버의 IP 주소로 변환하기 위해 DNS를 조회합니다.
- 조회 우선순위: `브라우저 캐시` → `OS 캐시` → `ISP DNS 서버` 순으로 확인하며 IP 주소(ex. 142.250.190.78)를 획득합니다.

<br>

### 3. TCP 연결(3-Way Handshake)
> IP 주소를 찾으면 전송 계층에서 안정적인 데이터 전송 통로를 만듭니다. 3-Way Handshake를 통해 서로의 상태를 확인합니다.
- SYN: 클라이언트가 서버에 연결 요청을 보냅니다.
- SYN-ACK: 서버가 요청을 수락하고 클라이언트의 수락을 기다립니다.
- ACK: 클라이언트가 최종 응답을 보내며 연결이 확립됩니다.

```
클라이언트 → SYN → 서버          (연결 요청)
클라이언트 ← SYN-ACK ← 서버      (요청 확인 및 응답)
클라이언트 → ACK → 서버          (연결 확립)
```

<br>

### 4. HTTP 요청 및 서버 응답(Request & Response)
> TCP 연결이 확립되면 애플리케이션 계층에서 실제 데이터 교환이 시작됩니다. 이 과정에서 데이터는 하위 계층을 거치며 패킷 단위로 전송됩니다.

#### HTTP 요청(Request)
- 브라우저는 GET / HTTP/1.1과 같은 요청 메시지를 생성하여 80번 포트(HTTP) 혹은 443번 포트(HTTPS)를 통해 서버에 전달합니다.
 - 캡슐화: 메시지는 전송 계층의 TCP 프로토콜을 거쳐 네트워크 계층(3계층)의 IP 주소와 데이터 링크 계층(2계층)의 MAC 주소 정보를 포함한 패킷 형태로 변환되어 전송됩니다.

#### 서버 처리 및 응답(Response)
- 구글 서버는 수신한 패킷을 역캡슐화하여 요청을 해석하고 그에 맞는 응답 메시지를 생성합니다.
  - 상태 코드: 요청이 성공적이라면 `200 OK` 상태 코드와 함께 실제 웹 페이지 데이터(HTML 등)를 실어 보냅니다.
  - 전송: 응답 데이터는 패킷 형태로 네트워크를 통해 클라이언트(브라우저)에게 도착합니다.

<br>

### 5. 브라우저 렌더링
> 브라우저는 서버로부터 받은 HTML, CSS, 자바스크립트 등의 데이터를 해석하여 화면에 페이지를 렌더링합니다.

<br>

### 6. TCP 연결 종료(4-Way Handshake)
> 데이터 전송이 완료되면 클라이언트와 서버는 4-Way Handshake 과정을 거쳐 TCP 연결을 종료합니다.
